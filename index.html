<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MonitoringPV</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  <link rel="stylesheet" href="css/style.css">
</head>
  <body class="bg-white min-h-screen text-gray-900 font-sans flex flex-col">
    <header class="fixed top-0 left-0 w-full z-50 bg-white/40 backdrop-blur-xl border-b border-white/20 shadow-lg">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16 sm:h-20">
          <div class="flex items-center gap-3 flex-wrap">
            <!--<img src="assets/images/drpm.png" alt="Logo DRPM" class="h-14 w-14 sm:h-20 sm:w-20 object-contain">-->
            <img src="assets/images/tutwurihandayani.png" alt="Logo Untad" class="h-5 w-5 sm:h-8 sm:w-8 object-contain">
            <img src="assets/images/kampusberdampak1.png" alt="Logo Untad" class="h-5 w-5 sm:h-8 sm:w-8 object-contain">
            <img src="assets/images/kampusberdampak2.png" alt="Logo Untad" class="h-5 w-5 sm:h-8 sm:w-8 object-contain">
            <img src="assets/images/untad.png" alt="Logo Untad" class="h-5 w-5 sm:h-8 sm:w-8 object-contain">
            <div>
              <h1 class="text-base sm:text-xl md:text-2xl font-bold text-gray-800 tracking-tight">Sistem Monitoring</h1>
              <p class="text-xs sm:text-sm text-gray-500">Universitas Tadulako</p>
            </div>
          </div>
          <nav class="hidden md:flex items-center gap-8">
            <button onclick="showPage('utama', this)" class="nav-link px-3 py-2 rounded-lg text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition">Utama</button>
            <button onclick="showPage('grafik', this)" class="nav-link px-3 py-2 rounded-lg text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition">Grafik</button>
            <button onclick="showPage('histori', this)" class="nav-link px-3 py-2 rounded-lg text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition">Histori</button>
          </nav>
          <div class="md:hidden">
            <button id="menuBtn" class="focus:outline-none text-xl text-gray-700 hover:text-blue-600 transition-colors duration-300">☰</button>
          </div>
        </div>
      </div>
      <div id="mobileMenu" class="hidden md:hidden absolute top-20 inset-x-0 bg-white/95 backdrop-blur-xl border-t border-gray-200 shadow-lg animate-slide-down">
        <nav class="flex flex-col px-6 py-4 space-y-4">
          <button onclick="showPage('utama', this)" class="nav-link text-left">Utama</button>
          <button onclick="showPage('grafik', this)" class="nav-link text-left">Grafik</button>
          <button onclick="showPage('histori', this)" class="nav-link text-left">Histori</button>
        </nav>
      </div>
    </header>
    <div class="flex-1">
      <div id="utama">
        <div class="flex flex-col items-center">
          <h2 class="text-center font-bold text-blue-600 mb-4">Manajemen Energi Pada Rumah Tropis SSRPV Berbasis Iklim Mikro Menggunakan Pendekatan Eksperimental dan Artificial Neural Network</h2>
          <div id="container" class="relative w-40 h-40 flex flex-col items-center justify-center">
            <svg id="hoseSvg" width="100%" height="100%" viewBox="0 0 200 200" class="absolute top-0 left-0">
              <circle id="water" cx="100" cy="100" r="60"
                stroke="deepskyblue" stroke-width="15" fill="none"
                stroke-linecap="round"
                transform="rotate(140 100 100)" />
            </svg>
            <div id="emoji" class="text-4xl text-orange-500 z-10"><i class="fas fa-temperature-half"></i></div>
            <div id="valueDisplay" class="font-bold text-lg z-10">-</div>
            <div id="kondisiCuaca" class="text-sm text-gray-600 z-10 mt-1">-</div>
            <span id="clock" class="text-sm text-gray-500 mt-1 z-10"></span>
            <h3 class="relative z-50">
              <a href="https://maps.app.goo.gl/QdtRZ6RYMNWyHMBPA"
                target="_blank"
                id="rumahPenelitian"
                class="text-blue-600 hover:underline">
                <i class="fas fa-map-marker-alt text-red-500"></i> Rumah Penelitian
              </a>
            </h3>
          </div>
        </div>
        <div class="flex flex-wrap justify-center gap-4 p-4">
          <div class="param-card">
            <div class="mb-1"><i class="fas fa-thermometer-half text-orange-400"></i></div>
            <div class="text-sm sm:text-base md:text-lg font-semibold" id="suhu1">- °C</div>
            <div class="text-xs sm:text-sm text-gray-500">Suhu Mono</div>
          </div>
          <div class="param-card">
            <div class="mb-1"><i class="fas fa-tint text-blue-100"></i></div>
            <div class="text-sm sm:text-base md:text-lg font-semibold" id="kelembaban1">- %</div>
            <div class="text-xs sm:text-sm text-gray-500">RH Mono</div>
          </div>
          <div class="param-card">
            <div class="mb-1"><i class="fas fa-thermometer-half text-orange-500"></i></div>
            <div class="text-sm sm:text-base md:text-lg font-semibold" id="suhu2">- °C</div>
            <div class="text-xs sm:text-sm text-gray-500">Suhu Poly</div>
          </div>
          <div class="param-card">
            <div class="mb-1"><i class="fas fa-tint text-blue-200"></i></div>
            <div class="text-sm sm:text-base md:text-lg font-semibold" id="kelembaban2">- %</div>
            <div class="text-xs sm:text-sm text-gray-500">RH Poly</div>
          </div>
          <div class="param-card">
            <div class="mb-1"><i class="fas fa-wind text-gray-200"></i></div>
            <div class="text-sm sm:text-base md:text-lg font-semibold" id="kecepatan_angin">- m/s</div>
            <div class="text-xs sm:text-sm text-gray-500">Kecepatan Angin</div>
          </div>
          <div class="param-card">
            <div class="mb-1"><i class="fas fa-compass text-gray-300"></i></div>
            <div class="text-sm sm:text-base md:text-lg font-semibold" id="arah_angin">-</div>
            <div class="text-xs sm:text-sm text-gray-500">Arah Angin</div>
          </div>
          <div class="param-card">
            <div class="mb-1"><i class="fas fa-sun text-yellow-300"></i></div>
            <div class="text-sm sm:text-base md:text-lg font-semibold" id="uv_index">-</div>
            <div class="text-xs sm:text-sm text-gray-500">UV Index</div>
          </div>
          <div class="param-card">
            <div class="mb-1"><i class="fas fa-sun text-yellow-400"></i></div>
            <div class="text-sm sm:text-base md:text-lg font-semibold" id="uv_intensity">-</div>
            <div class="text-xs sm:text-sm text-gray-500">UV Intensity</div>
          </div>
          <div class="param-card">
            <div class="mb-1"><i class="fas fa-sun text-yellow-500"></i></div>
            <div class="text-sm sm:text-base md:text-lg font-semibold" id="irradiance">-</div>
            <div class="text-xs sm:text-sm text-gray-500">Radiasi Matahari</div>
          </div>
          <div class="param-card">
            <div class="mb-1"><i class="fas fa-smog text-gray-400"></i></div>
            <div class="text-sm sm:text-base md:text-lg font-semibold" id="debu">- µg/m³</div>
            <div class="text-xs sm:text-sm text-gray-500">Debu</div>
          </div>
          <div class="param-card">
            <div class="mb-1"><i class="fas fa-cloud-showers-heavy text-blue-400"></i></div>
            <div class="text-sm sm:text-base md:text-lg font-semibold" id="curah_hujan">- mm</div>
            <div class="text-xs sm:text-sm text-gray-500">Curah Hujan</div>
          </div>
        </div>
      </div>
      <div id="grafik" class="hidden">
        <div class="p-4 grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="p-4 bg-white rounded-2xl shadow-lg">
            <h2 class="text-lg font-semibold mb-2 text-gray-800">Suhu</h2>
            <canvas id="chartSuhu"></canvas>
          </div>
          <div class="p-4 bg-white rounded-2xl shadow-lg">
            <h2 class="text-lg font-semibold mb-2 text-gray-800">Kelembaban</h2>
            <canvas id="chartKelembaban"></canvas>
          </div>
          <div class="p-4 bg-white rounded-2xl shadow-lg">
            <h2 class="text-lg font-semibold mb-2 text-gray-800">Kecepatan Angin</h2>
            <canvas id="chartAngin"></canvas>
          </div>
          <div class="p-4 bg-white rounded-2xl shadow-lg flex flex-col items-center">
            <h2 class="text-xl font-semibold mb-4 text-gray-800">Arah Angin</h2>
            <canvas id="compass" width="250" height="250"></canvas>
            <div id="windInfo" class="mt-4 text-center">
              <p class="text-lg font-medium text-gray-900" id="chartArahAngin">-</p>
            </div>
          </div>
          <div class="p-4 bg-white rounded-2xl shadow-lg">
            <h2 class="text-lg font-semibold mb-2 text-gray-800">Sinar UV</h2>
            <canvas id="chartUV"></canvas>
          </div>
          <div class="p-4 bg-white rounded-2xl shadow-lg">
            <h2 class="text-lg font-semibold mb-2 text-gray-800">Radiasi Matahari</h2>
            <canvas id="chartRadiasi"></canvas>
          </div>
          <div class="p-4 bg-white rounded-2xl shadow-lg">
            <h2 class="text-lg font-semibold mb-2 text-gray-800">Debu</h2>
            <canvas id="chartDebu"></canvas>
          </div>
          <div class="p-4 bg-white rounded-2xl shadow-lg">
            <h2 class="text-lg font-semibold mb-2 text-gray-800">Curah Hujan</h2>
            <canvas id="chartHujan"></canvas>
          </div>
        </div>
      </div>
      <div id="histori" class="hidden">
        <div class="p-6 bg-white rounded-2xl shadow-lg">
          <div class="flex justify-center mb-4">
            <div class="flex items-center gap-3 bg-white px-7 py-3 rounded-2xl shadow-sm">
              <input type="date" id="startDate" class="rounded-xl border px-3 py-2 text-sm text-gray-700">
              <span class="text-gray-400 text-sm">—</span>
              <input type="date" id="endDate" class="rounded-xl border px-3 py-2 text-sm text-gray-700">
              <button id="downloadCsvBtn" class="ml-4 rounded-xl bg-blue-100 text-blue-600 px-5 py-2 text-sm font-semibold">Unduh Data</button>
            </div>
          </div>
          <div class="overflow-x-auto rounded-2xl border border-gray-200">
            <table class="min-w-full border-collapse">
              <thead>
                <tr class="bg-gray-50 text-gray-700 text-sm tracking-wide">
                  <th class="px-4 py-2">Tanggal</th>
                  <th class="px-4 py-2">Waktu</th>
                  <th class="px-4 py-2">Suhu Mono</th>
                  <th class="px-4 py-2">RH Mono</th>
                  <th class="px-4 py-2">Suhu Poly</th>
                  <th class="px-4 py-2">RH Poly</th>
                  <th class="px-4 py-2">UV Index</th>
                  <th class="px-4 py-2">UV Intensity</th>
                  <th class="px-4 py-2">Debu</th>
                  <th class="px-4 py-2">Curah Hujan</th>
                  <th class="px-4 py-2">Kecepatan Angin</th>
                  <th class="px-4 py-2">Arah Angin</th>
                  <th class="px-4 py-2">Radiasi Matahari</th>
                </tr>
              </thead>
              <tbody id="data-body" class="text-gray-700 text-sm divide-y divide-gray-200 text-center"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <footer class="mt-auto bg-gray-100 text-gray-700 w-full">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 grid grid-cols-1 md:grid-cols-3 gap-6">
        <div>
          <button class="w-full flex justify-between items-center md:block md:cursor-default"
            onclick="toggleFooter(this)">
            <h3 class="font-bold text-sm text-gray-900">Tentang Kami</h3>
            <span class="md:hidden">+</span>
          </button>
          <ul class="mt-2 space-y-1 text-xs hidden md:block">
            <li><a href="https://untad.ac.id/" target="_blank" class="text-gray-700 hover:underline">Universitas Tadulako</a></li>
            <li><a href="https://fatek.untad.ac.id/" target="_blank" class="text-gray-700 hover:underline">Fakultas Teknik</a></li>
            <li><a href="https://elektro.fatek.untad.ac.id/" target="_blank" class="text-gray-700 hover:underline">Teknik Elektro</a></li>
          </ul>
        </div>
        <div>
          <button class="w-full flex justify-between items-center md:block md:cursor-default"
            onclick="toggleFooter(this)">
            <h3 class="font-bold text-sm text-gray-900">Layanan</h3>
            <span class="md:hidden">+</span>
          </button>
          <ul class="mt-2 space-y-1 text-xs hidden md:block">
            <li>Informasi</li>
            <li>Petunjuk Penggunaan</li>
          </ul>
        </div>
        <div>
          <button class="w-full flex justify-between items-center md:block md:cursor-default"
                  onclick="toggleFooter(this)">
            <h3 class="font-bold text-sm text-gray-900">Kontak</h3>
            <span class="md:hidden">+</span>
          </button>
          <ul class="mt-2 space-y-1 text-xs hidden md:block">
            <li>Email: info@untad.ac.id</li>
            <li>Telp: +62 451 123456</li>
            <li>Alamat: Tondo, Sulawesi Tengah</li>
          </ul>
        </div>
      </div>
      <div class="border-t border-gray-200 py-3 text-center text-xs text-gray-600">
        © 2025 Universitas Tadulako
      </div>
    </footer>
    <script src="js/script.js"></script>
  </body>
</html>
